@using BurnInControl.UI.Components.App_Components.Displays
@using BurnInControl.UI.Components.App_Components.Forms
@using BurnInControl.UI.Components.App_Components.Util
@using BurnInControl.UI.Components.App_Components.Controls
@using BurnInControl.Data.StationModel.Components



<RadzenSplitter Orientation="Orientation.Horizontal">
    <RadzenSplitterPane Size="15%" Collapsed="@this._runtimePaneCollapsed">
        <RadzenStack Orientation="Orientation.Vertical" AlignItems="AlignItems.Center" Gap="10" Style="margin: 10px">
            <RuntimeDisplay DisplayText="Runtime" TextStyle="TextStyle.H4" State="true" DisplayValue="06:07:53" LabelFontSize="12" />
            <ProbeRuntimes />
        </RadzenStack>
    </RadzenSplitterPane>
    <RadzenSplitterPane Size="70%" Collapsible="false">
        <RadzenSplitter Orientation="Orientation.Vertical" style=" border: 1px solid rgba(0,0,0,.08);">
            <RadzenSplitterPane Size="75%" Collapsible="false">
                <RadzenSplitter>
                        <RadzenTabs RenderMode="TabRenderMode.Client" SelectedIndexChanged="SelectedTabChangedHandler" Style="width: 100%; height: 100%">
                            <Tabs>
                                <RadzenTabsItem Text="Display" Selected="true">
                                    <StationDisplays/>
                                </RadzenTabsItem>
                                <RadzenTabsItem Text="Test Setup">
                                    <TestSetup></TestSetup>
                                </RadzenTabsItem>
                            </Tabs>
                        </RadzenTabs>
                </RadzenSplitter>
            </RadzenSplitterPane>
            <RadzenSplitterPane Size="25%" Resizable="true" Collapsed="this._eventPaneCollapsed" >
                <RadzenSplitter>
                    <RadzenSplitterPane>
                        <EventConsole @ref="@this._eventConsole" LogTitle="Station Log"/>
                    </RadzenSplitterPane>
                </RadzenSplitter>
            </RadzenSplitterPane>
        </RadzenSplitter>
    </RadzenSplitterPane>
    <RadzenSplitterPane Size="15%" Resizable="true" Collapsed="@this._controlPaneCollapsed">
        <RadzenRow AlignItems="AlignItems.Center" JustifyContent="JustifyContent.Center">
            <StationControl OnConnect="@this.OnConnectClicked"
                            OnReset="@this.OnResetClicked"
                            OnStart="@this.OnStartClicked"
                            OnCurrentChanged="CurrentChangedHandler"
                            OnTempChanged="TempChangedHandler"/>
        </RadzenRow>
    </RadzenSplitterPane>

</RadzenSplitter>

@code {
   private EventConsole _eventConsole=new EventConsole();
   
   private bool _eventPaneCollapsed = false;
   private bool _controlPaneCollapsed = false;
   private bool _runtimePaneCollapsed = false;
   
   private async Task OnStartClicked() {
       this._eventConsole.Log("Start Clicked",AlertStyle.Info);
   }
   
   private async Task OnResetClicked() {
       this._eventConsole.Log("Reset Clicked",AlertStyle.Warning);
   }
   
   private async Task OnConnectClicked() {
       this._eventConsole.Log("Connect Clicked",AlertStyle.Danger);
   }
   private void SelectedTabChangedHandler(int obj) {
       if (obj != 0) {
           this._controlPaneCollapsed = true;
           this._runtimePaneCollapsed = true;
       } else {
           this._controlPaneCollapsed = false;
           this._runtimePaneCollapsed = false;
       }
       this._eventConsole.Log($"Tab Changed {obj}",AlertStyle.Info);
   }
   private async Task CurrentChangedHandler(StationCurrent stationCurrent) {
       this._eventConsole.Log($"Current Selection Changed.  Value {stationCurrent.Name}",AlertStyle.Danger);
   }
   private async Task TempChangedHandler(double temp) {
       this._eventConsole.Log($"Temp Value Changed.  Value {temp}",AlertStyle.Base);
   }
} 

