@page "/"
@using System.Collections
@using BurnInControl.Data.StationModel
@using BurnInControl.Dashboard.Components.AppComponents
@using BurnInControl.Infrastructure.StationModel
@inject StationDataService StationDataService

<PageTitle>Dashboard</PageTitle>
@if (this._stations == null) {
    <RadzenStack AlignItems="AlignItems.Center" Class="rz-m-12" Gap="2rem">
        <RadzenProgressBarCircular Value="100" ShowValue="false" Mode="ProgressBarMode.Indeterminate" />
        <RadzenText TextStyle="TextStyle.Subtitle2" TagName="TagName.H3">Loading Station Status</RadzenText>
    </RadzenStack>
} else {
    <RadzenRow>
        @foreach(var station in this._stations) {
            <RadzenColumn Size="4">
                <StationStatusView StationId="@station.StationId" 
                                   StationIpAddress="@station.NetworkConfig.EthernetIp"/>
            </RadzenColumn>
        }
    </RadzenRow>
}


@code {
    private IEnumerable<Station>? _stations;
    protected override async Task OnInitializedAsync() {
        this._stations = await this.StationDataService.GetStations();
    }
}

